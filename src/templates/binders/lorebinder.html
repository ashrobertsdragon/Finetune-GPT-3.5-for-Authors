{% extends 'forms-base.html' %}

{% block title %}LoreBinder Setup{% endblock %}



{% block extra_js %}
  <script src="{{ url_for('static', filename='javascript/invalid-input.js') }}"></script>
{% endblock extra_js}

{% block content %}
  <h1>Create LoreBinder</h1>
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <script src="{{ url_for('static', filename='js/closeModal.js') }}"></script>
  <div class="flash-modal">
        <span class="material-symbols-outlined close-icon">
          close
          </span>
        <ul class="flashes">
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
        </ul>
      </div>
    {% endif %}
  {% endwith %}
  <form method="POST" class="form box" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <div class="flex-form">
      {{ form.author.label(class="input-label") }} {{ form.author(class="input-box metadata") }}
      <span class="text-muted">{{ form.author.errors }}</span>
    </div>
    <div class="flex-form">
      {{ form.title.label(class="input-label") }} {{ form.title(class="input-box metadata") }}
      <span class="text-muted">{{ form.title.errors }}</span>
    </div>
    <div class="flex-form form-check">
      {{ form.is_first_person.label }}
      {{ form.is_first_person }}
    </div>
    <div class="flex-form" id="narrator-container" style="display: none;">
      {{ form.narrator.label }} {{ form.narrator(class="input-box") }}
      <span class="text-muted">{{ form.narrator.errors }}</span>
    </div>
    <div class="flex-form">
      {{ form.character_attributes_input.label(class="input-label") }} 
      {{ form.character_attributes_input(class="metadata") }}
      <span class="text-muted">{{ form.character_attributes_input.errors }}</span>
    </div>
    <div class="flex-form">
      {{ form.other_attributes_input.label(class="input-label") }} 
      {{ form.other_attributes_input(class="metadata") }}
      <span class="text-muted">{{ form.other_attributes_input.errors }}</span>
    </div>
    <div class="flex-form">
      {{ form.file_upload.label(class="input-label") }} {{ form.file_upload(accept=".docx,.epub,.pdf,.txt") }}
      <span class="text-muted">{{ form.file_upload.errors }}</span>
    </div>
    {{ form.submit(class="btn btn-primary")}}
  </form>
{% endblock content %}
{% block footer %}
  {% include 'finetune-footer.html' %}
{% endblock footer %}
{% block end_js %}
<script>
  document.getElementById('is_first_person').addEventListener('change', function() {
    if (this.checked) {
      document.getElementById('narrator-container').style.display = 'block';
    } else {
      document.getElementById('narrator-container').style.display = 'none';
    }
  });
  </script>
  {% endblock}